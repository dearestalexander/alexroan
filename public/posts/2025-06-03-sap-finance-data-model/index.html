<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alex Roan | Strategy and Operations Consulting</title>
    <link rel="icon" type="image/png" href="/assets/images/favicon_io/favicon.ico">
    <link href="/styles.css" rel="stylesheet">
    <script defer src="/script-posts.js"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400..800;1,400..800&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Manrope:wght@200..800&family=Noto+Sans:ital,wght@0,100..900;1,100..900&family=Pacifico&family=Quattrocento:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://kit.fontawesome.com/0c355a85b4.js" crossorigin="anonymous"></script>
  </head>
  <body>
    <header class="header-ctr">
  <a href="#main" class="skip">Skip to main content</a>
  <p class="logo-ctr">
    <span class="logo-span-one">Hi,</span>
    <span class="logo-span-two">I'm Alex</span>
  </p>
  <nav>
    <ul role="list" class="nav-ul">
      <li><a class="nav-li" href="/">Home</a></li>
      <li><a class="nav-li" href="/about/alex/">About</a></li>
      <li><a class="nav-li" href="/projects/">Projects</a></li>
      <li><a class="nav-li" href="https://linktr.ee/alexanderroan">Socials</a></li>
    </ul>
  </nav>
</header>
    <div class="divider"></div>
    <main id="main" class="post-main">
      <div id="post-sidebar-toc-ctr"></div>
      <article class="post-article">
        <h1 class="post-title">Making sense of SAP finance - evolution of the data model</h1>
        <p id="post-tag" class="post-tag"> post</p>
        <p class="post-att">by Alexander Roan on 3 Jun 2025
        <h2>Introduction</h2>
<p>The main purpose of Enterprise Resource Planning (ERP) for the finance function is to collect information about business activities and prepare it for financial and management analysis.</p>
<p>At its core, this involves saving, manipulating, and retrieving data.</p>
<p>In this context, it's useful for both business and IT people to understand the SAP data model. This is particularly useful when discussing the limitations of systems and considering possible enhancements.</p>
<p>It also reduces the potential for misunderstandings. The interpretation of financial and management results requires a good understanding of the source data and the logic applied to apply any classifications or calculations.</p>
<p>In this article, I'll look at the evolution of the finance data model from SAP R/3 to SAP S/4HANA. The focus will be on several important tables.</p>
<h2>SAP R/3 Architecture</h2>
<p>SAP R/3 is an application built on a '3-tier architecture'.</p>
<p><img src="/assets/images/blog/sap-data/architecture.jpg" alt="SAP finance 3-tier architecture"></p>
<p>This architecture is commonly used for systems with multiple users and large data sets.</p>
<p>The user interface</p>
<ul>
<li>Also known as the client</li>
<li>Locally installed on the desktop</li>
<li>This is the user point of interaction</li>
<li>It sends and retrieves data to and from the server</li>
</ul>
<p>The application</p>
<ul>
<li>Executes programs with business logic</li>
<li>It sends and retrieves data to and from the database</li>
</ul>
<p>The database</p>
<ul>
<li>Manages create, update, and delete processes for data</li>
</ul>
<p>The database layer for SAP R/3 utilises a relational database management system (RDBMS).</p>
<p>'Relational' is quite descriptive here. An RDBMS typically stores data separated across many small tables.</p>
<p>Consider the scope of data in an ERP system: purchase orders, sales orders, customers, vendors, production orders, invoices, payments, and more. This is a high volume of data, much of it connected according to the flow of business transactions. A purchase order leads to a goods receipt, an invoice, and a payment. All need to be stored in separate but connected tables.</p>
<p>RDBMS was the only feasible option for ERP systems at the time. Later in the article, we will see how SAP HANA has changed this.</p>
<h2>SAP R/3 Modules</h2>
<p>SAP R/3 has an internal structure. It's broken down into functionally oriented modules. In recent times, SAP has shifted away from talking about modules. However, if you look at the configuration in S/4HANA, it's still structured this way.</p>
<p>The classic list of modules includes:</p>
<ul>
<li>SD - sales &amp; distribution</li>
<li>MM - materials management</li>
<li>PP - production planning</li>
<li>SM - service management</li>
<li>QM - quality management</li>
<li>PM - plant maintenance</li>
<li>HR - human resources</li>
<li>FI - financial accounting</li>
<li>CO - controlling</li>
<li>AM - fixed assets management</li>
<li>EC - enterprise controlling</li>
<li>PS - project systems</li>
<li>WF - workflow</li>
<li>IS - industry solutions</li>
</ul>
<p>SAP’s classic illustration of the modules:</p>
<p><img src="/assets/images/blog/sap-data/modules.jpg" alt="SAP finance 3-tier architecture"></p>
<p>Each of these modules has its own set of tables and programs.</p>
<p>The modules that we are most interested in for finance and will cover in this article are:</p>
<ul>
<li>FI financial accounting</li>
<li>CO controlling</li>
<li>EC enterprise controlling</li>
</ul>
<p>Asset management (AM) is also part of finance. However, for brevity, I will skip discussing AM tables here. This is not a big omission, as the finance postings generated in AM end up in FI and CO tables.</p>
<p>Other modules, such as sales and distribution (SD) and materials management (MM), also generate finance postings. Think of these as interfaces to FI and CO.</p>
<h2>Finance (FI and CO) tables</h2>
<p>Let's clear up some potential naming confusion.</p>
<p>In business terms, 'finance' usually means both financial accounting and management accounting.</p>
<p>In SAP terms, it is slightly different:</p>
<ul>
<li>FI; finance; financial accounting</li>
<li>CO; controlling; management accounting</li>
</ul>
<p>When I use 'finance', I refer to the whole of finance from a business perspective. If I want to refer to a part of SAP, I will use either ‘FI’ or ‘financial accounting’.</p>
<p>It’s helpful to think of FI and CO tables in categories:</p>
<p>Category 1: configuration tables:</p>
<ul>
<li>Long-term fixed data</li>
<li>Static data about the organisation (legal entity, reporting currency, etc.)</li>
<li>Settings on how transactions are processed (tolerances, default values, etc.)</li>
<li>These must be carefully managed
<ul>
<li>To ensure stability in how the system works</li>
<li>To ensure posts are captured in a ‘like for like’ way. Comparability of information is a critical concept in finance.</li>
</ul>
</li>
</ul>
<p>Category 2: master data tables:</p>
<ul>
<li>Relatively stable data, but may change as an organisation does</li>
<li>For example, general ledger accounts, vendors, and suppliers.</li>
</ul>
<p>Category 3: transaction tables:</p>
<ul>
<li>Point-in-time data that reflects a single business activity</li>
<li>For example, orders and invoices.</li>
</ul>
<p>Certain category 1 items, such as cost centers and profit centers, are ‘configured’ however, they lean towards category 2 master data. They are more ‘changeable’ than things like company code, but also need to be carefully managed to ensure reporting consistency and comparability over time.</p>
<h2>A business activity</h2>
<p>Systems make more sense when we view them from a business process perspective. We can look at the SAP finance tables through the lens of a finance activity, such as posting an invoice.</p>
<p>Below is a 'mock' invoice I put together for this discussion:</p>
<p><img src="/assets/images/blog/sap-data/invoice.jpg" alt="sample invoice"></p>
<p>Invoice standards vary by geography but generally include items like those shown.</p>
<p>Typical invoice fields:</p>
<ul>
<li>Invoicing party details: name and address of the party that issued the invoice</li>
<li>Invoiced party details: name and address of the party receiving the invoice</li>
<li>Invoice date</li>
<li>A unique reference number</li>
<li>A purchase order number or a contact name (if no PO)</li>
<li>Details of the goods or services provided
<ul>
<li>Description</li>
<li>When the goods or services were provided</li>
<li>Quantity</li>
<li>Unit price</li>
<li>Total price</li>
</ul>
</li>
<li>Tax amounts</li>
<li>Discount amounts</li>
<li>Terms of payment: at a minimum, the number of days before it's due for payment</li>
<li>Payment method</li>
<li>Bank details</li>
</ul>
<h2>From business activity to accounting</h2>
<p>Finance is unique in that we need to translate business activities into double-entry accounting entries.</p>
<p>The accounting equation is:</p>
<blockquote>
<p>Asset = Liabilities + Equity</p>
</blockquote>
<p>Every entry into accounting involves at least two 'line items' that balance to zero according to the above accounting equation.</p>
<p>For the above invoice. As a business activity, it states that</p>
<ul>
<li>Example client owns Alexander Roan Limited £12,000</li>
</ul>
<p>This is translated to an accounting entry as:</p>
<ul>
<li>A liability of £12,000 should be recorded on the vendor account for Alexander Roan</li>
<li>An expense of £10,000 should be recorded on the expense account for consultancy services</li>
<li>A recoverable item of £2,000 should be recorded on the tax account</li>
</ul>
<p>Or summarised as the accounting equation:</p>
<blockquote>
<p>2,000 (tax recoverable) = 12,000 (liability) + (-10,000) (P&amp;L / equity)</p>
</blockquote>
<p>Which balances to zero.</p>
<p>I go into more detail on this in my article on the chart of accounts:</p>
<p><a href="https://alexroan.com/posts/2020-06-25-chart-of-accounts/">Chart of accounts - concept and design</a>.</p>
<h2>Finance document posting in SAP</h2>
<p>The example invoice translates to one document with three line items.</p>
<p>One of the classic transactions in SAP R/3 to enter an invoice is FB60. We use this transaction to 'post' the invoice:</p>
<p><img src="/assets/images/blog/sap-data/FB60.jpg" alt="FB60"></p>
<p>A common structure for documents in business systems is to break the document down into a header section and a line items section.</p>
<p>In our invoicing scenario:</p>
<p>Invoice header:</p>
<ul>
<li>General information relevant to the entire transaction</li>
<li>Invoice date, posting date, reference, header text, currency, etc.</li>
</ul>
<p>Line items:</p>
<ul>
<li>Individual accounting entries (i.e., postings to accounts)</li>
<li>In this example, three line items: vendor, expense, and tax</li>
</ul>
<p>The FB60 transaction is visually split into two sections. The top half contains fields related to both the header and vendor line item, while the bottom half has a set of rows that are used to enter additional 'offsetting' line items.</p>
<p>The top half of the screen defaults to basic data, but has tabs to switch to views for payment data, tax data, etc.</p>
<p>The information entered in this transaction will be saved to several FI and CO tables. In this example, two or potentially three documents will be created depending on whether profit center accounting is active.</p>
<p>The data saved in tables relating to this transaction goes beyond what is seen on the invoice; it includes internal information and derived or calculated information. You could consider three types of data:</p>
<p>A: Internal information:</p>
<p>Information that is known to SAP and will be added to the tables by default.</p>
<ul>
<li>The 'document type' for 'invoice' will be recorded based on using transaction FB60</li>
<li>The 'user' posting the invoice will be added based on the user login ID</li>
<li>The entry time (document creation date) will be added based on the system date/time</li>
<li>etc.</li>
</ul>
<p>B: Invoice information:</p>
<p>Relevant details from the invoice will be entered.</p>
<ul>
<li>The vendor</li>
<li>The amount</li>
<li>Payment terms</li>
<li>Tax amounts</li>
</ul>
<p>C: Derived and calculated information:</p>
<p>Some data will be either validated or calculated.</p>
<ul>
<li>The expense account will be derived based on the service description. The AP clerk will search for the best-matching account</li>
<li>Payment terms may be included on the invoice, but the default value will be proposed from the vendor master data</li>
<li>Tax amounts may be automatically calculated based on a tax code and then checked against the invoice rather than entered directly</li>
</ul>
<h2>Finance document tables</h2>
<p>To start, let's look at key accounting tables that will be referenced or updated with this transaction.</p>
<p>Category 1: Configuration data:</p>
<ul>
<li>Information that controls how transactions process data</li>
<li>Organisation data that will be included in the transaction posting.</li>
</ul>
<p>A sample of important tables for finance</p>
<ul>
<li>T001: company codes</li>
<li>TCURC/TCURT: currency codes</li>
<li>TCURR: exchange rates</li>
<li>T003: document types</li>
<li>(and many more)</li>
</ul>
<p>Category 2: Master data:</p>
<ul>
<li>Information about the organisation model</li>
<li>Information about its operating environment</li>
</ul>
<p>Examples of this are general ledger accounts, vendors, customers, cost centers, and profit centers.</p>
<p>Some of the important tables for finance:</p>
<ul>
<li>General ledger master data
<ul>
<li>SKA1: G/L general data (CoA)</li>
<li>SKB1: G/L company data</li>
</ul>
</li>
<li>Accounts payable master data
<ul>
<li>LFA1: vendor master general</li>
<li>LFB1: vendor company</li>
<li>LFBK: vendor bank</li>
</ul>
</li>
<li>Controlling master data
<ul>
<li>CSKA: cost elements (CoA)</li>
<li>CSKB: cost elements (controlling area)</li>
<li>CSKS/T: cost center master data</li>
<li>CSSK: cost center: cost element</li>
</ul>
</li>
<li>Enterprise controlling master data
<ul>
<li>CEPC: profit center master data.</li>
</ul>
</li>
</ul>
<p>Category 3: Transactional data:</p>
<p>Accounting is structured around two main tables, BKPF for header information and BSEG for line item information. General ledger journals, accounts payable invoices, and accounts receivable invoices all go to these tables. Financial postings from materials management, asset management, etc., also go to these tables.</p>
<ul>
<li>Accounting documents: line items
<ul>
<li>BKPF: account document header</li>
<li>BSEG: accounting document line item</li>
</ul>
</li>
<li>Accounting documents: secondary indexes
<ul>
<li>BSIS: accounting: secondary index for G/L accounts</li>
<li>BSAS: accounting index for G/L (cleared)</li>
<li>BSIK: accounting: secondary index for vendors</li>
<li>BSAK: accounting index for vendors (cleared)</li>
</ul>
</li>
<li>Accounting totals
<ul>
<li>GLT0: G/L account transaction figures</li>
</ul>
</li>
<li>Controlling documents:
<ul>
<li>COBK: controlling document header</li>
<li>COEP: controlling document line item</li>
</ul>
</li>
<li>Profit center accounting documents
<ul>
<li>GLPCA: profit center accounting line items</li>
</ul>
</li>
</ul>
<p>BSIS, BSAS, BSIK, and BSAK are not additional tables; they are secondary indexes on BSEG.</p>
<p>There is also the totals table GLT0, which includes transaction totals per account per period. This helps with reporting performance when only reporting on balances.</p>
<h2>Accounting document - header (BKPF)</h2>
<p>As we enter values in fields in FB60, SAP will validate them. Validations range from 'format' to 'value' checks. For example, a format check would apply to a date field, while a value check may apply to something like the vendor field.</p>
<p>Only once all fields are entered and validated can the document be 'posted'. At this point, SAP will assign a document number.</p>
<p>Let's look at a selection of key fields from the accounting header table (BKPF).</p>
<p><img src="/assets/images/blog/sap-data/BKPF.jpg" alt="FB60"></p>
<p>All of this information is relevant to the entire invoice (all line items). Note that this is not a complete list of fields, just a sample of fields of interest.</p>
<p>BKPF will also include the accounting document number, but only when posted.</p>
<h2>Accounting document - vendor line item (BSEG)</h2>
<p>The first line item to enter is the vendor line item. As transaction FB60 is being used, SAP can default various values for this line item, such as account type, debit/credit, posting key, etc. It also knows that certain vendor-line related items, such as payment terms and payment method, are required.</p>
<p><img src="/assets/images/blog/sap-data/BSEG.jpg" alt="FB60"></p>
<p>When creating invoices, it's helpful to include clear information to ensure the AP clerk can easily post them. This may include adding things like:</p>
<ul>
<li>The customer's reference number for your account (i.e., their vendor number)</li>
<li>A clear description of the nature of the services</li>
<li>A clear description of the tax type and rate</li>
</ul>
<h2>Accounting document - general ledger line item</h2>
<p>After entering the header and vendor line item details, next comes the 'offsetting' line items to G/L accounts.</p>
<p>The example invoice is for consultancy services. In this case, it's an overhead cost that is charged to a single expense account.</p>
<p>In some cases, an invoice may total up various sub-services and may need to be split across multiple accounts.</p>
<p>The AP clerk will search for the right expense account based on the description of the goods or services on the invoice.</p>
<p><img src="/assets/images/blog/sap-data/BSEG2.jpg" alt="FB60"></p>
<p>(This is just a subset of fields.)</p>
<p>In this line item, an entry of £10,000 is recorded on the consulting expense account.</p>
<p>But what if we want to analyse and report on the department that was the source of the cost? Was it £10,000 spent by marketing, or IT, or £5,000 each?</p>
<p>This is where Controlling (CO) and cost centres come in.</p>
<p>In the accounting posting to the financial account, we enter a cost centre in the field BSEG-KOSTL.</p>
<p>While accounts represent the nature of a transaction, a cost centre represents the source of the cost. This usually equates to a team or department within a function.</p>
<p>In order to enter a cost centre with an account, it must be activated as a primary cost element. This means the account can be used in CO.</p>
<p>When an account is activated as a cost element and a line item is entered to it with a cost center, this leads to the creation of a controlling document.</p>
<h2>Controlling document - header (COBK)</h2>
<p>As with accounting documents, controlling documents are split into header data and line item data.</p>
<p><img src="/assets/images/blog/sap-data/COBK.jpg" alt="FB60"></p>
<p>Note that the controlling document header includes some references to the originating FI document.</p>
<h2>Controlling document - line item (COEP)</h2>
<p><img src="/assets/images/blog/sap-data/COEP.jpg" alt="FB60"></p>
<p>Note that rather than company code, the controlling tables contain a controlling area. Controlling is structured by controlling areas. If we want to compare management costs across different parts of our business, we should make sure they are in the same controlling areas.</p>
<h3>How FI and CO work</h3>
<p>In this example, our accounting document posts to an expense account with a cost centre, so two documents are created:</p>
<ul>
<li>An accounting document
<ul>
<li>BKPF updated with header data</li>
<li>BSEG updated with line item data</li>
</ul>
</li>
<li>A controlling document
<ul>
<li>COBK updated with header data</li>
<li>COEP updated with line item data</li>
</ul>
</li>
</ul>
<p>Why does this split exist? Why isn't everything all in one document?</p>
<p>The design of finance in R/3 was to have a split between financial accounting and management accounting. There are various ways to look at why it's done like this, two that stand out are:</p>
<ul>
<li>Hardware and software limitations required the data to be split up across multiple small tables</li>
<li>Auditability of financial information is improved if any management 'manipulation' is done separately</li>
</ul>
<p>Consider the example of a management allocation.</p>
<p>Assume our £10,000 consultancy service was delivered over 10 days, with 2 days spent with individual functions. From a financial accounting perspective, all we need to record is:</p>
<ul>
<li>£10,000 spent on consultancy</li>
</ul>
<p>However, from a management perspective, we may want to record:</p>
<ul>
<li>£2,000 spent on consultancy by the IT department</li>
<li>£2,000 spent on consultancy by the logistics department</li>
<li>£2,000 spent on consultancy by headquarters</li>
<li>£2,000 spent on consultancy by the marketing department</li>
<li>£2,000 spent on consultancy by the facilities department</li>
</ul>
<p>To keep financial accounting as efficient as possible, we can post £10,000 to a simple 'overheads' cost center. We can then distribute the costs in CO to the five functions without affecting the original posting.</p>
<p>This works because CO allows you to make postings within CO that don't affect FI. These are known as secondary postings.</p>
<p>When we posted to a cost centre with an account in FI, we had to activate that account as a primary cost element. To post to an account in CO only, we need to activate it as a secondary cost element.</p>
<p>Many of the financial reports in R/3 allow us to make selections on whether we want to see only primary postings or whether we want to see secondary postings. Using that logic, we could view the above example as either just £10,000 or we could view it split over the five areas.</p>
<p>This brings us to the topic of reconciliation ledger. Due to this ability to post to FI and CO separately, SAP R/3 has a process and set of tables to reconcile FI and CO. These will be noted later in the table diagrams.</p>
<h2>Enterprise controlling - profit center accounting document (GLPCA)</h2>
<p>Time to introduce a potential third document!</p>
<p>R/3 has an option to activate profit center accounting.</p>
<p>Profit centers are used to collect revenue and costs. They are oriented towards calculating and reporting profit. Profit centers are generally created by area of profit responsibility. This will vary depending on the organisation, but typically it will often represent a set of products or a brand.</p>
<p>As profit centers collect costs, we add them to overhead cost centres to capture those costs. This means that with PCA active, if we post to a cost centre, we also post to a profit centre, which creates an additional document.</p>
<p>This time, there is no header and line items split, just one main table GLPCA</p>
<p><img src="/assets/images/blog/sap-data/GLPCA.jpg" alt="FB60"></p>
<h2>Document numbers</h2>
<p>After all required information is entered in FB60 and the document is posted, the tables will all be updated with document numbers. For the accounting document, the number goes into the field BKPF-BELNR. This number links header and line item information on a one-to-many basis.</p>
<p>SAP identifies individual documents by the combination of:</p>
<ul>
<li>Accounting document number: BKPF-BELNR</li>
<li>Fiscal year: BKPF-GJAHR</li>
<li>Company code: BKPF-BUKRS</li>
</ul>
<p>Profit center and controlling documents are linked back to FI documents, and it's easy to navigate between them.</p>
<h2>Summary of postings</h2>
<p><img src="/assets/images/blog/sap-data/flow.jpg" alt="posting flow via tables"></p>
<p>To summarise the process for posting an invoice and updating transactional tables:</p>
<ol>
<li>Accounting information is entered that updates BKPF and BSEG, there will be at least two line items</li>
<li>If a cost center (or other cost object is used), a controlling document will also be created. This will update tables COBK and COEP</li>
<li>If PCA is active, a profit center document will also be created. This will update table GLPCA</li>
<li>During this process, configuration and master data tables will be referenced both to control how the transaction processes, to add default values, and to check and derive values.</li>
</ol>
<p>We can adjust this diagram to  represent the table hierarchy better and add some of the additional finance tables for reference.</p>
<p><img src="/assets/images/blog/sap-data/R3tables.jpg" alt="posting flow via tables"></p>
<p>Note that the process is different for purchase order based invoices.</p>
<p>If, instead of an invoice, we looked at a payment posting, this would likely post a line item to a bank account and a line item to a vendor account. There is no expense account, and hence no cost centre, and no controlling document or profit center accounting document.</p>
<h2>List of noteworthy finance tables</h2>
<p>Here is a fuller list of tables for reference:</p>
<p>Noteworthy tables where configuration is stored</p>
<ul>
<li>T005: countries</li>
<li>TCURC/TCURT: currency codes</li>
<li>TCURR: exchange rates</li>
<li>T001: company codes</li>
<li>TKA01: controlling area</li>
<li>T004: chart of accounts</li>
<li>T077S: account groups</li>
<li>T009: fiscal year variants</li>
<li>T010: posting periods</li>
<li>T003: document types</li>
</ul>
<p>Finance - general ledger (FI-GL) tables:</p>
<ul>
<li>Master data
<ul>
<li>SKA1: G/L general data (CoA)</li>
<li>SKB1: G/L company data</li>
<li>BNKA: Bank master record</li>
</ul>
</li>
<li>Transactions
<ul>
<li>BKPF: Account document (header)</li>
<li>BSEG: accounting document (line item)</li>
<li>BSIS: accounting: secondary index for G/L accounts</li>
<li>BSAS: accounting index for G/L (cleared)</li>
</ul>
</li>
<li>Totals
<ul>
<li>GLT0: G/L account transaction figures</li>
</ul>
</li>
</ul>
<p>Finance - accounts receivable (FI-AR) tables:</p>
<ul>
<li>Master data
<ul>
<li>KNA1: customer general data</li>
<li>KNB1: customer company data</li>
<li>KNBK: customer bank data</li>
</ul>
</li>
<li>Transactions
<ul>
<li>(A/R transactions are stored in G/L tables)</li>
<li>BSID: accounting: secondary index for customers</li>
<li>BSAD: accounting: index for customers (cleared items)</li>
</ul>
</li>
</ul>
<p>FInance - Accounts Payable (FI-AP) tables:</p>
<ul>
<li>Master data
<ul>
<li>LFA1: vendor master general</li>
<li>LFB1: vendor company</li>
<li>LFBK: vendor bank</li>
</ul>
</li>
<li>Transactions
<ul>
<li>(A/P transactions are stored in G/L tables)</li>
<li>BSIK: accounting: secondary index for vendors</li>
<li>BSAK: accounting index for vendors (cleared)</li>
</ul>
</li>
</ul>
<p>FInance - Asset Accounting (FI-AA)</p>
<ul>
<li>Master data
<ul>
<li>ANKA: asset classes general</li>
<li>ANKT: asset classes descriptions</li>
<li>ANLU: asset user fields</li>
<li>ANLZ: time-dependent asset allocations</li>
<li>ANKB: asset classes: depreciation area</li>
</ul>
</li>
<li>Transactions
<ul>
<li>ANEK: document header asset posting</li>
<li>ANEP: asset line items</li>
</ul>
</li>
</ul>
<p>Cost center accounting (CO)</p>
<ul>
<li>Master data
<ul>
<li>CSKA: cost elements (CoA)</li>
<li>CSKB: cost elements (controlling area)</li>
<li>CSKS/T: cost center master data</li>
<li>CSSK: cost center: cost element</li>
</ul>
</li>
<li>Transactions
<ul>
<li>COBK: cost object header</li>
<li>COEP: cost object line items (by period)</li>
<li>COST: cost object price totals</li>
<li>COSP: cost totals for primary costs</li>
<li>COSS: cost totals for secondary costs</li>
</ul>
</li>
</ul>
<p>Enterprise controlling - profit center accounting (EC-PCA)</p>
<ul>
<li>Master data
<ul>
<li>CEPC: profit center master data</li>
</ul>
</li>
<li>Transactions
<ul>
<li>GLPCA: EC-PCA Actual Line Items.</li>
<li>GLPCP: EC-PCA Plan Line Items.</li>
<li>GLPCT: EC-PCA Totals Table.</li>
<li>GLPCC: EC-PCA Transaction Attributes.</li>
<li>GLPCO: EC-PCA Object Table for Account Assignment Element.</li>
</ul>
</li>
</ul>
<p>Finance special ledger (FI-SL)</p>
<ul>
<li>The special ledger utilises BKPF, BSEG, etc., and adds custom totals tables.</li>
<li>GLT1, GLT2, etc. typical names for custom totals tables used in FI-SL</li>
</ul>
<p>Finance reconciliation ledger (FI-RE)</p>
<ul>
<li>COSP_RE: Primary cost postings</li>
<li>COSS_RE: Secondary cost postings</li>
</ul>
<h2>Evolution from R/3 to ECC and NewGL</h2>
<p>As R/3 evolved, SAP rebranded it to ECC (enterprise core component).</p>
<p>I discuss this in more detail in my post on HANA and S/4HANA.</p>
<p><a href="https://alexroan.com/posts/2020-06-03-sap-s4-hana/">SAP HANA and SAP S/4HANA - A Simple Guide</a></p>
<p>The new branding represented the strategy of a 'core ERP' connected to various specialist applications. Think of ECC feeding BW, business objects, BPC, etc.</p>
<p>As part of ECC, the NewGL (new general ledger) was introduced. Activation of NewGL was optional. This led to the terms NewGL and classic GL.</p>
<p>NewGL removed a lot of complexity from FI-CO, while also providing new solutions for some challenging requirements.</p>
<p>For context, let's summarise the biggest challenges with SAP R/3 before NewGL</p>
<ul>
<li>Multiple reporting standards / multiple valuation
<ul>
<li>Think of an international organisation that reports according to multiple standards: US GAAP, IFRS, Indian GAAP, etc.</li>
<li>Think of organisations that may want to value things differently for different purposes. This is particularly relevant for fixed assets and other financial items.</li>
</ul>
</li>
<li>Full financial statements at levels other than company codes
<ul>
<li>A company may want to see complete financials for a brand or location, not just a statutory legal entity.</li>
</ul>
</li>
<li>The need to maintain a 'fat' G/L (more on this later)</li>
</ul>
<p>NewGL provided improved solutions to these. The main functions of NewGL were:</p>
<ul>
<li>Introduce multiple ledgers using <strong>leading</strong> and <strong>non-leading</strong> ledgers
<ul>
<li>Meets the requirements of multiple reporting standards or multiple valuations</li>
<li>Replace legacy solutions, commonly the 'accounts' approach and special ledger (FI-SL)</li>
</ul>
</li>
<li>Integration of <strong>profit center</strong> within the main ledger</li>
<li>Introduction of <strong>segment</strong> for segment reporting
<ul>
<li>Segment refers to legal reporting by line of business or geography (IFRS 8)</li>
</ul>
</li>
<li>Introduction of <strong>functional area</strong> for cost of sales reporting
<ul>
<li>Cost of sales reporting focuses on classifying expenses by function</li>
</ul>
</li>
<li>Introduction of <strong>document splitting</strong>
<ul>
<li>Create the ability to prepare a full set of accounts at a level other than company code</li>
<li>The most common use case is splitting on 'profit center' or 'segment' levels</li>
</ul>
</li>
<li>Add real-time integration - most usefully between FI and CO
<ul>
<li>This removed the need to use the FI/CO reconciliation ledger</li>
</ul>
</li>
<li>Enable faster closing: this is a benefit of all of the above:
<ul>
<li>Elimination of special-purpose ledger or reduction in the number of accounts</li>
<li>Elimination of the reconciliation ledger</li>
<li>Inclusion of all account assignment objects in the ledgers</li>
</ul>
</li>
</ul>
<p>As part of the NewGL solution, there are various changes to the tables. Let's visualise</p>
<ul>
<li>No longer used / retired tables in orange</li>
<li>Enhanced tables in green</li>
<li>New tables in blue</li>
</ul>
<p><img src="/assets/images/blog/sap-data/newGLtables.jpg" alt="posting flow via tables"></p>
<p>Retired / no longer used tables:</p>
<ul>
<li>Profit center accounting tables (GLPCT, GLPCA, GLPCO): now that profit center is integrated within NewGL, separate tables are no longer required</li>
<li>GL totals tables (GLT0): replaced by NewGL totals tables</li>
<li>Special purpose ledger (GLT1, etc.): theoretically no longer needed due to new multiple ledger functionality, which utilises new tables</li>
<li>Reconciliation ledger (COSP, etc.): NewGL included real-time integration between CO and FI, removing the need for a periodic process and set of reconciliation tables</li>
</ul>
<p>Enhanced tables:</p>
<ul>
<li>Accounting tables BKPF and BSEG:
<ul>
<li>Addition of the new fields: functional area, segment, etc.</li>
<li>Addition of the possibility for customer-defined fields</li>
</ul>
</li>
</ul>
<p>New tables:</p>
<ul>
<li>FAGLFLEXT: NewGL totals table</li>
<li>FAGLFLEXH: NewGL header table</li>
<li>FAGLFLEXA: NewGL line items table</li>
<li>BSEG_ADD: Ledger-specific valuation postings (for year-end / periodic parallel valuation)</li>
</ul>
<h3>Extended field set</h3>
<p>As we are discussing tables and fields, it's worthwhile to discuss the set of fields available in the accounting tables.</p>
<p>As discussed BKPF and BSEG contain the header and line item information for accounting documents. The line items in BSEG may represent vendor line items, customer line items, or G/L line items. The G/L line items may relate to balance sheet or profit and loss accounts. This could represent cash, fixed assets, revenue, costs, tax etc.</p>
<p>When we post an accounting document against a general ledger account, we capture a lot of information. As discussed earlier, this may include things like posting date, document type, G/L account, credit/debit, amount, etc.</p>
<p>This set of fields is sometimes referred to as the <strong>G/L code block</strong>.</p>
<p>When ERP was first introduced, the G/L code block was small. Only a limited number of values were captured with accounting postings.</p>
<p>Accounts should represent the nature of a financial item or activity. In the past if an organisation wanted to see more detail, they typically added additional accounts. This is known colloquially as a 'fat' G/L.</p>
<p>To illustrate:</p>
<ul>
<li>Account 60001001: Consulting - IT</li>
<li>Account 60001002: Consulting - Strategy</li>
<li>Account 60001003: Consulting - Logistics.</li>
</ul>
<p>In this scenario, three accounts were created. These represent a single nature 'consulting', split across three functions: IT, strategy, and logistics.</p>
<p>As we move from a 'fat' to a 'thin' G/L, we strip accounts back to 'nature' and use other dimensions to meet management reporting needs. In the above example, we would typically use a cost centre to represent a team, department, or function.</p>
<ul>
<li>Account 60001001 Consulting:
<ul>
<li>Posted with cost centre 1001 - IT department</li>
<li>Posted with cost centre 1002 - Head office department (corporate strategy)</li>
<li>Posted with cost centre 1003 - Logistics department.</li>
</ul>
</li>
</ul>
<p>Over time, both financial and management reporting have added requirements for additional dimensions. A modern finance G/L code block includes fields such as: multiple currencies, transaction type, business area, cost centre, profit centre, material, plant, sales org, functional area, consolidation entity, etc. These and more are all in high demand for analytics programs.</p>
<p>In the past, I've worked on consulting engagements that involved redesign of the code block. It can be surprisingly complex when you consider the logic of how different values are sourced for different posting types.</p>
<p>To recap, NewGL was instrumental in bringing the following fields into the main ledger:</p>
<ul>
<li>Profit center (in a more complete way)</li>
<li>Segment (usually derived from profit center)</li>
<li>Functional area (usually derived from cost center)</li>
<li>Allowance for custom-defined fields (via various customising steps)</li>
<li>Ledger (as part of the ability to post to multiple ledgers).</li>
</ul>
<p>These fields can be combined with <strong>document splitting</strong> to allow for the creation of a full set of financial statements by those dimensions. This was very hard to achieve before NewGL.</p>
<p>I won't go into detail on document splitting here. But in simple terms, if you want to split on a field included in a GL line item entry, you will split all other lines on the same basis.</p>
<p>Let's illustrate</p>
<p>Basic posting to two profit centers without splitting:</p>
<ul>
<li>Vendor: 12,000</li>
<li>Expense account with cost centre 1 &amp; profit center 1: 5,000</li>
<li>Expense account with cost centre 2 &amp; profit center 2: 5,000</li>
<li>Tax: 2,000</li>
</ul>
<p>Posting with document splitting on a profit center basis:</p>
<ul>
<li>Vendor: 6,000 with profit center 1</li>
<li>Vendor: 6,000 with profit center 2</li>
<li>Expense account with cost centre 1 &amp; profit center 1: 5,000</li>
<li>Expense account with cost centre 2 &amp; profit center 2: 5,000</li>
<li>Tax: 1,000 with profit center 1</li>
<li>Tax: 1,000 with profit center 2</li>
</ul>
<p>As you can see with splitting, we can now split financial information across all accounts by profit center.</p>
<h3>Old accounting tables vs. new tables</h3>
<p>Looking at the diagram, you may wonder why accounting data is duplicated across BKPF/BSEG and FAGLFLEXA / FAGLFLEXH.</p>
<p>The elephant in the room is that changing or removing BKPF and BSEG is nearly impossible.</p>
<ul>
<li>NewGL was optional at first</li>
<li>BKPF and BSEG are integrated into many hundreds of transactions, reports etc.</li>
</ul>
<p>Secondly, the tables are not identical; they do serve different purposes.</p>
<p>Role of BKPF/BSEG:</p>
<ul>
<li>Focus: Holds original FI entry data, aka 'entry view'</li>
<li>Primary source of truth for financial audit</li>
<li>Captures new fields (segment, functional area, customer fields)</li>
<li>No document splitting</li>
<li>No ledger-specific postings</li>
</ul>
<p>Role of FAGLFLEXA / FAGLFLEXH:</p>
<ul>
<li>Focus: Ledger-based reporting/management reporting</li>
<li>Secondary source of truth for financial audit</li>
<li>Captures new fields (segment, functional area, customer fields)</li>
<li>Applies document splitting</li>
<li>Applies ledger-specific postings</li>
</ul>
<p>Think of BKPF / BSEG as being the source of accounting truth. Think of FAGLFLEXA / FAGLFLEXH as the source of either alternate ledger-based reporting or alternate management views.</p>
<p>As I write this, I do wish the NewGL tables were more concisely named!</p>
<h2>Evolution with 'S/4HANA'</h2>
<p>NewGL brought a significant change to finance. However, possibilities were still limited by the IT hardware and RDBMS database.</p>
<p>I have previously written a blog post about HANA and S/4HANA, which might be useful before continuing.</p>
<p><a href="https://alexroan.com/posts/2020-06-03-sap-s4-hana/">SAP HANA and S/4HANA - a simple guide</a></p>
<p>As a recap the HANA database allowed ERP to operate as both a transactional and analytical application, this was due to HANA's</p>
<ul>
<li>In-memory computing</li>
<li>Columnar database</li>
<li>Parallel processing</li>
</ul>
<p>ECC therefore, evolved into S/4HANA, an ERP running on the HANA database.</p>
<p>I'd like to be both honest and give credit to SAP. At its core, S/4HANA is still very much R/3. The financial transactions are similar. The processes you work through are similar. However, the core is greatly improved by the NewGL and HANA changes. I do feel that SAP sometimes tries to brand S/4HANA as something completely new. That's not right, it's an evolution of R/3.</p>
<p>The major benefit of S/4HANA is that the RDBMS constraints are gone. The design paradigm of having many tables: BKPF, BSEG, COBK, COEP, FAGLFLEXT, FAGLFLEXH, FAGLFLEXH, etc. is no longer necessary.</p>
<p>To take advantage of this, SAP created the 'Universal Journal' based on the new table ACDOCA. A lot of the complexity of FI-CO is replaced with a single actuals table.</p>
<p>Let's visualise the S/4HANA changes</p>
<ul>
<li>Orange: no longer required or retired</li>
<li>Blue: new</li>
<li>Grey: tables replaced with 'compatibility views'</li>
</ul>
<p><img src="/assets/images/blog/sap-data/S4GLtablesChanges.jpg" alt="posting flow via tables"></p>
<ul>
<li>
<p>ACDOCA is introduced</p>
<ul>
<li>Central table for all finance information</li>
<li>FI, CO (primary and secondary postings)</li>
<li>Stores line items, but S/4HANA can calculate totals easily on the fly</li>
</ul>
</li>
<li>
<p>BKPF and BSEG exist, but as compatibility views</p>
<ul>
<li>Views built on top of ACDOCA</li>
<li>Older programs can still work</li>
</ul>
</li>
<li>
<p>COBK and COEP exist, but as compatibility views</p>
</li>
<li>
<p>All totals are gone</p>
<ul>
<li>GLT0 (classic)</li>
<li>GLT1 (FI-SL)</li>
<li>FAGLFLEXT (NewGL)</li>
</ul>
</li>
</ul>
<p>Note that I have excluded planning tables for simplicity. In my experience, planning is not often done in S/4HANA directly.</p>
<p>This brings us to a simplified view for S/4HANA</p>
<p><img src="/assets/images/blog/sap-data/S4GLtables.jpg" alt="posting flow via tables"></p>
<p>As you might imagine, there are thousands of standard and customer programs that reference the old tables BSEG, GLT0, FAGFLEXA, etc. These remain in SAP, but not exactly as 'tables'. They exist as 'compatibility views' which allow old programs to access the data in the historical structure of those tables.</p>
<h3>What about secondary cost element postings</h3>
<p>If you were paying attention, you might ask about what happened to this separation between FI and CO. What if we want to make allocations in CO only for management purposes?</p>
<p>This is managed using statistical postings. An assessment can be done on a statistical basis. A flag is used to choose whether to view financial information with or without these kinds of allocations.</p>
<h2>Core data services (CDS)</h2>
<p>If you've read about SAP Fiori, Embedded Analytics, or SAP Analytics Cloud (SAC), you may have seen the term CDS view.</p>
<p>CDS views have become a very important concept within SAP architecture.</p>
<h3>From tables to views</h3>
<p>In R/3, we often developed custom reports. In these reports, we used ABAP (SAP's proprietary programming language) to look up data.</p>
<p>ABAP code for looking up data is quite similar to SQL. For example</p>
<p><code>SELECT BUKRS from BSEG</code>
(select company code from table BSEG)</p>
<h3>Modern reporting and S/4HANA</h3>
<p>With increasing focus on reporting and analytics, we have come along way from the occasional custom report. ERP now needs to provide a variety of data sets for different applications.</p>
<p>This is where core data services come in.</p>
<p>In IT, we call CDS views 'semantic layers'. At a basic level, it means that a CDS view specifies a set of data with information about that data and how it can be utilised.</p>
<p>Rather than having to code which tables to look up and how to join them, a developer can now refer to a CDS view.</p>
<p>One of the great things about CDS views is that if a standard one doesn't quite fit your need, you can just put a new view on top of it and make adjustments.</p>
<p>Which brings me to layers. CDS views work in layers. Often you have:</p>
<ul>
<li>A top-level 'consumption layer' designed to present data to an app</li>
<li>Intermediate views</li>
<li>Bottom-level views that get data from tables.</li>
</ul>
<p>The layering of the views gets complicated. I was looking at a commitment report CDS view in SAP, and I think it had about 10 layers accessing various accounting and purchasing tables at different points.</p>
<p>However, this ability to build in layers does make things easier for developers, especially when it comes to re-usability.</p>
<p>In terms of application runtime, S/4HANA simply flattens all the CDS layers down into a single set of lookup statements from the database tables. There is no added effort from the system to work with multiple layers.</p>
<p>In terms of examples, some common CDS views are:</p>
<ul>
<li>I_GLAccountLineItemCube
<ul>
<li>Main cube for GL line items</li>
<li>Based on ACDOCA</li>
</ul>
</li>
<li>I_GLAccountBalanceCube
<ul>
<li>Main cube for GL balances</li>
<li>Derives from the line items cube</li>
</ul>
</li>
<li>I_ActualJournalEntryItem
<ul>
<li>Journal entry details</li>
</ul>
</li>
</ul>
<p>These start with 'I', indicating they should be used as a basis for other views.</p>
<p>As an example of a view ready to be used, we have, for example, 'C_GLLineItemRawData', which is a 'C' or consumption view that is designed to provide raw data for analytics. This is fed by I_GLAccountLineItemCube.</p>
<h2>Accessing S/4HANA financial data</h2>
<p>One of the practical points of understanding the financial data model in S/4HANA is preparing and accessing data for external usage:</p>
<ul>
<li>Sending data to analytics</li>
<li>Sending data to financial consolidation systems</li>
<li>Extracting data for audit</li>
<li>Extracting data for systems upgrade</li>
</ul>
<p>Within S/4HANA, the aforementioned CDS views can be used to access ACDOCA. The current recommended integration service is SAP's OData service.</p>
<p>Alternatively, ABAP can still be used with Select statements to access ACDOCA.</p>
<p>And there are also standard data extractors for BW, Data Warehouse Cloud, and DataSphere.</p>
<h2>Final words</h2>
<p>Hopefully, this provides some useful context around tables. I realise we very lightly touched on some functional topics without detailed explanations. Let me know if you have questions.</p>
<p>Please also feel free to comment on topics of interest for my next post.</p>
<p>You may find other posts of interest on my website:</p>
<p>https://alexroan.com/filter/posts/</p>
<p>Finance systems-related posts include:</p>
<ul>
<li>SAP HANA and S/4HANA a simple guide</li>
<li>The chart of accounts - concept and design</li>
<li>Improving the record-to-report process.</li>
</ul>

        <div class="post-comments flow">
          <strong>Share, comment/discuss</strong>
          <p>Share on 
            <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://alexroan.com/posts/2025-06-03-sap-finance-data-model/" target="_blank">LinkedIn</a>, 
            <a href="https://twitter.com/intent/tweet?url=https://alexroan.com/posts/2025-06-03-sap-finance-data-model/&text=Making sense of SAP finance - evolution of the data model" target="_blank">X</a>, 
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://alexroan.com/posts/2025-06-03-sap-finance-data-model/" target="_blank">or Facebook</a>.
          </p>
          <div id="cusdis_thread"
            data-host="https://cusdis.com"
            data-app-id="acb35451-258e-4673-9949-4ca8681c63ab"
            data-page-id="/posts/2025-06-03-sap-finance-data-model/"
            data-page-url="/posts/2025-06-03-sap-finance-data-model/"
            data-page-title="Making sense of SAP finance - evolution of the data model">
          </div>
          <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
        </div>
      </article>
    </main>
    <footer class="flow">
  <p class="footer-attribution">Website built by Alex Roan using HTML, CSS and <a href="https://www.11ty.dev/">11ty</a>, hosted on <a href="https://www.netlify.com/">Netflify</a></p>
</footer>
    <script></script>
  </body>
</html>
